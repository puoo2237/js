<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        let customInfo = [
            { id: "aaa", name: "홍길동", age: 20 },
            { id: "bbb", name: "김개똥", age: 30 },
            { id: "ccc", name: "고길동", age: 40 }
        ]

        const init = () => {
            const div = document.getElementById("div")
        }

        // 모든 회원 보기
        const custom = (item) => {
            return item ? `
            <tr>
                <td>${item.id}</td>
                <td onclick="moreInfo('${item.id}')">${item.name}</td>
                <td>${item.age}</td>
            </tr>
            `: undefined
        }

        const makeTable = (msg) => {
            return msg ? `
        <table border="1">
            <thead>
                <tr>
                    <th>아이디</th>
                    <th>이름</th>
                    <th>나이</th>
                </tr>
            </thead>
            <tbody>
                    ${msg}
            </tbody>
        </table>
            `: undefined
        }
        const allCustom = () => {
            let msg = "";
            customInfo.forEach(function (item) {
                msg += custom(item)
            })
            div.innerHTML = makeTable(msg)
        }

        // 특정 회원 조회
        const getCustomId = (customId) => {
            const res = customInfo.filter(function (item) {
                return item.id == customId
            })
            return res ? res : undefined
        }

        const dscCustom = () => {
            const input1 = document.getElementById('dsc_input_id')
            const msg = input1.value ? custom(getCustomId(input1.value)[0]) : alert('회원 id를 입력해주세요')
            console.log(msg)
            div.innerHTML = makeTable(msg)

            input1.value = ""
        }

        // 특정 회원 삭제
        const delCustomId = (customId) => {
            const res = customInfo.filter(function (item) {
                return item.id != customId
            })
            return res ? res : undefined
        }

        const delCustom = () => {
            const input2 = document.getElementById('del_input_id')
            if (getCustomId(input2.value)[0]) {
                customInfo = delCustomId(input2.value)
                allCustom()
            } else {
                div.innerHTML=alert('회원 id를 다시 입력해주세요')
            }
            input2.value = ""
        }

            // 사용자 이름 클릭 시 개인 정보 출력
            const moreInfo = (id) => {
                const custom = getCustomId(id)[0]
                div.innerHTML = `
            <b>아이디: </b> ${custom.id}<br>
            <b>이름: </b> ${custom.name}<br>
            <b>나이: </b> ${custom.age}
            `
            }
    </script>
</head>

<body onload="init()">
    <div id="div">
        목록을 보여줍니다.
    </div>
    <hr>
    <button id="all_custom" onclick="allCustom()">모든 회원 보기</button><br>
    <input id="dsc_input_id" placeholder="input id"><br>
    <button id="dsc_custom" onclick="dscCustom()">특정 회원 조회</button><br>
    <input id="del_input_id" placeholder="input id"><br>
    <button id="del_custom" onclick="delCustom()">특정 회원 삭제</button>
</body>

</html>